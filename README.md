# RichLog - å¯Œåª’ä½“æ—¥å¿—æŸ¥çœ‹å™¨

RichLog æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„æ—¥å¿—å¢å¼ºå·¥å…·ï¼Œä¸“é—¨ç”¨äºåœ¨æ ‡å‡†æ–‡æœ¬æ—¥å¿—ä¸­åµŒå…¥å’Œè§£æå¯Œåª’ä½“å†…å®¹ã€‚å½“åº”ç”¨ç¨‹åºéœ€è¦åœ¨æ—¥å¿—ä¸­è®°å½•å›¾ç‰‡ã€é…ç½®æ–‡ä»¶ã€å‘½ä»¤è¾“å‡ºç­‰å¤æ‚æ•°æ®æ—¶ï¼ŒRichLog å°†è¿™äº›æ•°æ®ç¼–ç ååµŒå…¥æ—¥å¿—ï¼Œå¹¶æä¾›ç›´è§‚çš„ Web ç•Œé¢è¿›è¡ŒæŸ¥çœ‹å’Œåˆ†æã€‚

## âœ¨ ç‰¹æ€§

- ğŸ” **æ™ºèƒ½è§£æ**ï¼šè‡ªåŠ¨è¯†åˆ«å’Œé‡ç»„æ—¥å¿—ä¸­çš„ RICHLOG æ ¼å¼æ•°æ®
- ğŸ–¼ï¸ **å¤šåª’ä½“æ”¯æŒ**ï¼šæ”¯æŒå›¾ç‰‡ã€é…ç½®æ–‡ä»¶ã€å‘½ä»¤è¾“å‡ºç­‰å¤šç§æ•°æ®ç±»å‹
- ğŸ”Œ **æ’ä»¶æ¶æ„**ï¼šå¯æ‰©å±•çš„æ’ä»¶ç³»ç»Ÿï¼Œæ”¯æŒè‡ªå®šä¹‰æ•°æ®ç±»å‹
- ğŸŒ **Web ç•Œé¢**ï¼šç°ä»£åŒ–çš„å“åº”å¼ Web ç•Œé¢
- ğŸ” **æœç´¢è¿‡æ»¤**ï¼šæ”¯æŒå…³é”®è¯æœç´¢å’Œç±»å‹ç­›é€‰
- ğŸ“± **ç§»åŠ¨å‹å¥½**ï¼šå“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨è®¾å¤‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 16+
- npm æˆ– yarn

### å®‰è£…å’Œè¿è¡Œ

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/jerryokk/richlog.git
cd richlog

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

è®¿é—® `http://localhost:9000` æŸ¥çœ‹åº”ç”¨ã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# æ„å»ºè¾“å‡ºåœ¨ dist/ ç›®å½•
```

## ğŸ“Š æ•°æ®æ ¼å¼

RichLog ä½¿ç”¨ç‰¹å®šçš„æ ¼å¼åœ¨æ—¥å¿—ä¸­åµŒå…¥å¯Œåª’ä½“æ•°æ®ï¼š

```
[æ—¶é—´æˆ³] RICHLOG:type,uuid,index,total,hexdata
```

**å‚æ•°è¯´æ˜ï¼š**
- `type`: æ•°æ®ç±»å‹ï¼ˆconfigã€imageã€command ç­‰ï¼‰
- `uuid`: å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºå…³è”åˆ†ç‰‡æ•°æ®
- `index`: å½“å‰åˆ†ç‰‡ç´¢å¼•ï¼ˆä» 1 å¼€å§‹ï¼‰
- `total`: æ€»åˆ†ç‰‡æ•°é‡
- `hexdata`: åå…­è¿›åˆ¶ç¼–ç çš„æ•°æ®

**ç¤ºä¾‹ï¼š**
```
[2023-08-15 10:00:01.236] RICHLOG:config,c9a3a0ad,1,1,7b22736572766572223a7b...
[2023-08-15 10:15:30.533] RICHLOG:image,e5f6g7h8,1,2,FFD8FFE000104A4649...
[2023-08-15 10:15:30.533] RICHLOG:image,e5f6g7h8,2,2,FFD8FFE000104A4649...
[2023-08-15 11:00:00.755] RICHLOG:command,m3n4o5p6,1,1,46696c6573797374656d...
```

## ğŸ”Œ æ’ä»¶ç³»ç»Ÿ

RichLog é‡‡ç”¨æ¨¡å—åŒ–çš„æ’ä»¶æ¶æ„ï¼Œæ”¯æŒè‡ªåŠ¨å‘ç°å’ŒåŠ è½½æ’ä»¶ã€‚

### å†…ç½®æ’ä»¶

| æ’ä»¶ç±»å‹ | æè¿° | åŠŸèƒ½ |
|---------|------|------|
| **config** | é…ç½®æ–‡ä»¶æŸ¥çœ‹å™¨ | JSON/XML æ ¼å¼åŒ–æ˜¾ç¤ºï¼Œè¯­æ³•é«˜äº®ï¼Œæœç´¢ |
| **image** | å›¾ç‰‡æŸ¥çœ‹å™¨ | å›¾ç‰‡æ˜¾ç¤ºï¼Œç¼©æ”¾ï¼Œæ—‹è½¬ï¼Œä¸‹è½½ |
| **command** | å‘½ä»¤è¾“å‡ºæŸ¥çœ‹å™¨ | å‘½ä»¤è¡Œè¾“å‡ºæ ¼å¼åŒ–ï¼Œæœç´¢ï¼Œå¤åˆ¶ |

### æ’ä»¶ç»“æ„

```
src/plugins/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ plugin.json          # æ’ä»¶é…ç½®
â”‚   â”œâ”€â”€ index.html           # æ’ä»¶ç•Œé¢
â”‚   â””â”€â”€ script.js            # æ’ä»¶é€»è¾‘
â”œâ”€â”€ image/
â”‚   â”œâ”€â”€ plugin.json
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ script.js
â””â”€â”€ command/
    â”œâ”€â”€ plugin.json
    â”œâ”€â”€ index.html
    â””â”€â”€ script.js
```

### åˆ›å»ºè‡ªå®šä¹‰æ’ä»¶

1. åœ¨ `src/plugins/` ä¸‹åˆ›å»ºæ–°ç›®å½•ï¼Œå¦‚ `sensor/`
2. åˆ›å»ºå¿…éœ€æ–‡ä»¶ï¼š

**plugin.json**
```json
{
  "type": "sensor",
  "name": "ä¼ æ„Ÿå™¨æ•°æ®",
  "description": "æŸ¥çœ‹ä¼ æ„Ÿå™¨æ•°æ®",
  "color": "warning",
  "mainColor": "#ffc107",
  "bgColor": "bg-warning",
  "icon": "activity",
  "version": "1.0.0"
}
```

**index.html**
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ä¼ æ„Ÿå™¨æ•°æ®æŸ¥çœ‹å™¨</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div id="sensor-container">
        <!-- æ’ä»¶å†…å®¹ -->
    </div>
</body>
</html>
```

**script.js**
```javascript
const PluginBase = require('../plugin-base');

class SensorPlugin extends PluginBase {
    displayData(data) {
        // å®ç°æ•°æ®æ˜¾ç¤ºé€»è¾‘
        document.getElementById('sensor-container').innerHTML = 
            `<pre>${JSON.stringify(data, null, 2)}</pre>`;
    }
}

new SensorPlugin();
```

3. é‡æ–°æ„å»ºé¡¹ç›®ï¼Œæ’ä»¶å°†è‡ªåŠ¨è¢«å‘ç°å’ŒåŠ è½½

## ğŸ› ï¸ å¼€å‘

### é¡¹ç›®ç»“æ„

```
richlog/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒè§£æå¼•æ“
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ richlog-encoder.js
â”‚   â”‚   â”œâ”€â”€ richlog-parser.js
â”‚   â”‚   â””â”€â”€ plugin-handler.js
â”‚   â”œâ”€â”€ plugins/             # æ’ä»¶ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ plugin-base.js
â”‚   â”‚   â”œâ”€â”€ plugin-registry.js
â”‚   â”‚   â”œâ”€â”€ plugin-scanner.js
â”‚   â”‚   â””â”€â”€ */               # å„ç§æ’ä»¶
â”‚   â””â”€â”€ web/                 # Web ç•Œé¢
â”‚       â”œâ”€â”€ index.js
â”‚       â”œâ”€â”€ index.html
â”‚       â””â”€â”€ styles.css
â”œâ”€â”€ test/                    # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ generate-log.js      # æ—¥å¿—ç”Ÿæˆå™¨
â”‚   â””â”€â”€ sample.log           # ç¤ºä¾‹æ—¥å¿—
â”œâ”€â”€ dist/                    # æ„å»ºè¾“å‡º
â”œâ”€â”€ webpack.config.js        # Webpack é…ç½®
â””â”€â”€ package.json
```

### å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# ç”Ÿæˆæµ‹è¯•æ—¥å¿—
cd test && node generate-log.js
```

### æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: åŸç”Ÿ JavaScript + Bootstrap 5
- **æ„å»ºå·¥å…·**: Webpack 5
- **å¼€å‘æœåŠ¡å™¨**: webpack-dev-server
- **æ ·å¼**: CSS + Bootstrap
- **é€šä¿¡**: postMessage APIï¼ˆæ’ä»¶é—´é€šä¿¡ï¼‰

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç”Ÿæˆæµ‹è¯•æ•°æ®

```bash
cd test
node generate-log.js
```

è¿™ä¼šç”ŸæˆåŒ…å«å„ç§å¯Œåª’ä½“æ•°æ®çš„ç¤ºä¾‹æ—¥å¿—æ–‡ä»¶ã€‚

### åœ¨åº”ç”¨ä¸­ä½¿ç”¨

1. å¯åŠ¨ RichLog Web ç•Œé¢
2. ç‚¹å‡»"åŠ è½½æ—¥å¿—"æŒ‰é’®ï¼Œé€‰æ‹©æ—¥å¿—æ–‡ä»¶
3. æˆ–è€…ç‚¹å‡»"ç²˜è´´æ—¥å¿—"æŒ‰é’®ï¼Œç›´æ¥ç²˜è´´æ—¥å¿—å†…å®¹
4. ç‚¹å‡»å¯Œåª’ä½“é“¾æ¥æŸ¥çœ‹è¯¦ç»†å†…å®¹

### ç•Œé¢åŠŸèƒ½

- **æœç´¢**: åœ¨æœç´¢æ¡†ä¸­è¾“å…¥å…³é”®è¯è¿‡æ»¤æ—¥å¿—
- **ç±»å‹ç­›é€‰**: ç‚¹å‡»ä¾§è¾¹æ çš„æ•°æ®ç±»å‹è¿›è¡Œç­›é€‰
- **å¯Œåª’ä½“æŸ¥çœ‹**: ç‚¹å‡» `ğŸ“ [ç±»å‹] æŸ¥çœ‹å†…å®¹` é“¾æ¥æ‰“å¼€è¯¦ç»†è§†å›¾
- **æ’ä»¶äº¤äº’**: åœ¨æ’ä»¶çª—å£ä¸­è¿›è¡Œç¼©æ”¾ã€æ—‹è½¬ã€æœç´¢ç­‰æ“ä½œ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ”„ ç‰ˆæœ¬å†å²

### v1.0.0
- âœ… æ ¸å¿ƒæ—¥å¿—è§£æåŠŸèƒ½
- âœ… æ’ä»¶ç³»ç»Ÿæ¶æ„
- âœ… Web ç•Œé¢å’Œç”¨æˆ·äº¤äº’
- âœ… é…ç½®æ–‡ä»¶ã€å›¾ç‰‡ã€å‘½ä»¤è¾“å‡ºæ’ä»¶
- âœ… è‡ªåŠ¨æ’ä»¶å‘ç°æœºåˆ¶
- âœ… postMessage é€šä¿¡ç³»ç»Ÿ
- âœ… å“åº”å¼ç•Œé¢è®¾è®¡
